---
title: 'API en direct : VOD à partir de Live Event'
parent: Guides 
grandparent: Live API
---
 <h1>Cette page a été déplacée - vous serez dirigé vers le <a href="https://apis.support.brightcove.com/live-api/guides/live-api-vod-live-event.html">nouvel emplacement</a> dans 3 secondes. Veuillez mettre à jour vos signets !</h1>
<script type="text/javascript">
var t = setTimeout (function () { window.location.href = 'https://apis.support.brightcove.com/live-api/guides/live-api-vod-live-event.html'; }, 3000) ;
</script>
<article class="bcls-article">
  <h1>API en direct : VOD de l'événement en direct</h1>
  <summary>Dans cette rubrique, vous apprendrez comment créer une vidéo à la demande (VOD) à partir d'un événement de streaming en direct une fois l'événement terminé.</summary>

  <aside class="bcls-aside bcls-aside--information">Live to VOD ne peut pas être utilisé avec des flux chiffrés et renvoie une erreur lors de la création d'un événement de tâche Live.</aside>



<section class="bcls-section">
<h2 id="Introduction">Introduction</h2>

<p>Pour les événements de diffusion en direct plus courts, vous souhaiterez peut-être rendre un enregistrement de l'événement disponible sous forme de vidéo à la demande (VOD) dans votre <span translate="No">Nuage vidéo</span> compte une fois l'événement terminé. Vous pouvez facilement le faire en ajoutant une configuration pour la VOD lorsque vous <a href="/live-api/references/reference.html#api-Live_Jobs-Create_a_Live_Job">créez votre travail en direct</a>.</p>

<p>Fast Live to VOD permet de publier rapidement les clips avec précision des segments, tandis qu'un processus back-end entièrement transparent pour le client nettoie les limites des éléments et republie.</p>

<p>Il en résulte une mise sur le marché plus rapide avec un élément qui sera automatiquement republié avec les limites souhaitées.</p>

<p><strong>Important</strong>:</p>

<ul>
	<li>Lorsque l'événement de streaming en direct est terminé, arrêtez votre encodeur, mais <strong>n' <a href="/live-api/references/reference.html#api-Live_Jobs-Cancel_Live_Job">annulez</a> pas la tâche</strong>. Attendez que le clip VOD ait été créé avant d'annuler la tâche, sinon il ne sera pas créé avec succès.</li>
	<li>La création de la VOD ne commencera pas tant que le <code translate="No">reconnect_time</code> pour le travail en direct a expiré.</li>
	<li>Si la durée de l'événement en direct est supérieure à 24 heures, seules les dernières 24 heures seront capturées en VOD.</li>
</ul>

<section class="bcls-subsection">
<h3 id="fast_vod">Option VOD rapide</h3>

<p>L'option VOD rapide vous permet d'obtenir la version VOD de l'événement en direct plus rapidement. Fast Live to VOD publiera (à l'aide d'un transmux) des rendus en direct qui seront <strong>précis par segment</strong>.</p>

<p>Les <code translate="No">output</code> champs pour la VOD rapide sont :</p>

<ul>
  <li><code translate="No">live_to_vod</code> mis à <code translate="No">true</span> </code></li>
	<li><code translate="No">mode</code>(requis pour la VOD rapide) - pour la VOD rapide, la valeur sera <code translate="No">instant</code></li>
	<li><code translate="No">playlist_label</code>(facultatif) - Uniquement applicable aux VOD en mode instantané. Indique la liste de lecture à utiliser pour créer une sortie VOD (à partir du travail en direct). Nécessaire uniquement si des playlists personnalisées ont été définies lors de la création d'emplois en direct.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Implementation">Implémentations</h2>

<h3>Lorsque vous créez le travail en direct</h3>
<p>Le moyen le plus simple d'implémenter Live to VOD consiste à inclure le <code translate="No">"live_to_vod": true</code> champ dans le corps de la requête lorsque vous créez la tâche, soit dans :</p>
<ul>
  <li>le plus haut niveau <code translate="No">videocloud</code> objet (pour créer la VOD en tant qu'actif distant)</li>
  <li>un objet de sortie qui sort vers Video Cloud ou vers S3</li>
</ul>
<h4>Envoyer à <span translate="No">Nuage vidéo</span></h4>

<p>Notez qu'il existe deux façons d'utiliser les <code translate="No">videocloud</code> objets lors de la création d'une nouvelle tâche en direct :</p>

<ol class="bcls-tasklist-restart">
	<li>Comprenant <code translate="No">videocloud</code> dans le <strong>champs au niveau de l'emploi</strong> va créer une vidéo dans le <span translate="No">Nuage vidéo</span> compte qui prendra le flux en direct comme ressource distante et créera la VOD dans votre bibliothèque Video Cloud :

	<pre class="line-numbers">
<code class="language-json" translate="No">{
    "live_stream": true,
    "region": "us-west-2",
    "reconnect_time": 2400,
    "live_dvr_sliding_window_duration": 30,
    <strong>
      "videocloud": {
        "video": {
          "name": "test_live_stream"
        },
        <span class="bcls-highlight">"live_to_vod": true</span>
        }
    </strong></code></pre>
	</li>
	<li>
	<p>L'inclusion de l' <code translate="No">videocloud</code> objet dans les propriétés d'un <code translate="No">outputs</code> clip ou d'un objet VOD complet créera un <span translate="No">Video Cloud.</span> vidéo pour le clip : le clip est ingéré dans <span translate="No">Video Cloud</span> et fait partie de la bibliothèque de VOD :</p>

	<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 2400,
  "live_dvr_sliding_window_duration": 30,
	"videocloud": {
		"video": {
			"name": "test_live_stream"
		}
	},
  "outputs": [
    { "videocloud": {
        "video": {
            "name": "video name",
        },
        "ingest": {
            "profile": "<span class="bcls-input">valid-ingest-profile-name</span>"
        }
    },
    "credentials": "<span class="bcls-input">USER_VIDEOCLOUD_CREDENTIAL_LABEL</span>"
    }
  ]
}</code></pre>
    <p>Remarque : omettez le champ de profil d'ingestion pour utiliser le profil d'ingestion par défaut du compte.</p>
	</li>
</ol>

<p>Vous pouvez également inclure l'objet <code translate="no">videocloud dans un</code> objet de sortie (dans ce cas, vous n'avez pas besoin de <code translate="No">live_to_vod</code> champ) :</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 600,
  "ad_insertion": false,
  "outputs": [
    { OTHER_JOB_OUTPUT_OBJECT },
    { OTHER_JOB_OUTPUT_OBJECT_2 },
    <span class="bcls-highlight">{ "videocloud": {
        "video": {
            "name": "video name",
            "description": "video description",
            "long_description": "long description",
            "tags": [
            "tag1", "tag2"
            ],
            "schedule":
            { "starts_at": "2017-01-01T12:00:00-04:00", "ends_at": "2099-01-01T12:00:00-04:00" }
            ,
            "custom_fields": {
                "someCustomField": "value"
            },

        },
        "ingest": {
            "profile": "<span class="bcls-input">valid-ingest-profile-name</span>"
        }
    },
    "credentials": "<span class="bcls-input">USER_VIDEOCLOUD_CREDENTIAL_LABEL</span>"
    } </span>
  ]
}</code></pre>

<aside class="bcls-aside bcls-aside--information">Si vous n'avez pas encore d'informations d'identification pour la configuration de votre compte Video Cloud, vous pouvez ajouter de nouvelles informations d'identification <a href="/live-api/references/reference.html#operation/CreateCredential">via l'API</a>.</aside>

<p>Notez que pour les métadonnées vidéo, vous pouvez inclure tous les champs répertoriés pour l'opération <a href="https://docs.brightcove.com/cms-api/v1/doc/index.html#api-videoGroup-Create_Video">Créer une vidéo</a> de l'API CMS.</p>

<p>Les profils d'ingest définissent les formats associés qui seront créés pour la VOD. Pour <code translate="No">valid-ingest-profile-name</code>, vous pouvez remplacer le nom de n'importe quel profil d'ingest personnalisé ou standard par votre compte. Les profils standard que vous possédez dépendent de l'activation ou non de votre compte pour la livraison dynamique. Consultez les <a href="https://apis.support.brightcove.com/ingest-profiles/references/standard-ingest-profiles-dynamic-delivery-and-context-aware-encoding.html">Profils d'ingest standard pour la livraison dynamique et l'encodage tenant compte du contexte</a> ou les <a href="https://apis.support.brightcove.com/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">profils d'ingest standard pour le transcodage hérité</a>.</p>

<aside class="bcls-aside bcls-aside--information">Notez que le <code translate="No">profile</code> le champ est facultatif. Si vous ne spécifiez pas de profil, le profil par défaut du compte sera utilisé.</aside>

<h4>Envoyer à S3</h4>

<p>Pour qu'une version VOD de l'événement soit enregistrée dans votre compartiment S3, incluez une version de la <strong>sortie</strong> en surbrillance ci-dessous.</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 600,
  "ad_insertion": false,
  "outputs": [
    { OTHER_JOB_OUTPUT_OBJECT },
    { OTHER_JOB_OUTPUT_OBJECT_2 },
    <span class="bcls-highlight">{
      "url":"s3://YOUR_BUCKET/path/filename.mp4",
      "credentials": "<span class="bcls-input">YOUR_CREDENTIAL_LABEL</span>",
      "notifications": [
        {
          "url": "http://httpbin.org/post?vodStateChange"
        },
        {
          "url": "http://httpbin.org/post?vodFinished",
          "event": "output_finished"
        }
      ]
    }</span>
  ]
}</code></pre>

<aside class="bcls-aside bcls-aside--information">Une étiquette d'identification pour un nom d'utilisateur + mot de passe valide pour votre compartiment S3 doit avoir été créée lors de la configuration de votre compte Live, et l'étiquette d'identification vous a été envoyée. Si vous ne l'avez pas, veuillez <a href="https://supportportal.brightcove.com/s/login/?language=en_US">contacter le support Brightcove</a>.</aside>
<h3>Créer la VOD sous forme de clip vidéo ouvert</h3>
<p>Une autre façon d'obtenir une VOD pour un événement en direct est de <a href="/live-api/guides/live-api-creating-vod-clips.html">Créer un clip VOD</a> sans heure de fin. Voir le document de coupure pour plus de détails.</p>
</section>

<section class="bcls-section">
<h2 id="Limitations">Contraintes</h2>

<ul>
	<li>Si vous <a href="/live-api/references/reference.html#api-Live_Jobs-Stop_Live_Job">arrêtez (annulez)</a> le travail actif avant la création de la VOD, elle ne sera pas créée. Au lieu de cela, arrêtez votre encodeur pour lancer la création de la VOD, et attendez que cela se termine avant d'arrêter le travail.</li>
	<li>Pour <a href="/live-api/guides/live-api-static-entry-points.html">Point d'entrée statique</a> ruisseaux <strong>seul</strong> , Live to VOD ne peut pas être configuré pour archiver le flux à la fin.
	<p style="font-weight:bold;">Solutions de rechange :</p>

	<ul>
		<li>Utilisez l' <a href="/live-api/guides/live-api-creating-vod-clips.html">écrêtage</a> pour archiver l'événement en direct complet sous forme de VOD. La fenêtre d'écrêtage sera disponible pour la durée standard après un événement ou jusqu'à la prochaine activation du SEP (selon la plus courte des deux éventualités).</li>
	</ul>
	</li>
</ul>
</section>
</article>