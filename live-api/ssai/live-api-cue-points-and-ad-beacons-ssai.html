---
title: 'API en direct : Points de repère et balises publicitaires avec SSAI' Description : Dans cette rubrique, vous apprendrez comment gérer les points de repère et les balises publicitaires lorsque vous utilisez l'Insertion d'annonces côté serveur (SSAI) de Brightcove pour vos travaux de diffusion en direct.
parent: SSAI 
grandparent: Working with the Live API
---
 <h1>Cette page a été déplacée - vous serez dirigé vers le <a href="https://apis.support.brightcove.com/live-api/ssai/live-api-cue-points-and-ad-beacons-ssai.html">nouvel emplacement</a> dans 3 secondes. Veuillez mettre à jour vos signets !</h1>
<script type="text/javascript">
var t = setTimeout (function () { window.location.href = 'https://apis.support.brightcove.com/live-api/ssai/live-api-cue-points-and-ad-beacons-ssai.html'; }, 3000) ;
</script>
<article class="bcls-article">
 <h1>{{ page.title }}</h1>
 <summary>{{ page.description }}</summary>
{% raw %}
 <section class="bcls-section">
  <h2 id="Overview">Vue d'ensemble</h2>
  
  <p>Insertion d'annonces côté serveur <span translate="No">(SSAI)</span> vous permet d'afficher des publicités lors d'un événement de diffusion en direct à des heures spécifiées. Pour plus d'informations générales, consultez l' <a href="/live-api/ssai/live-api-server-side-ad-insertion-ssai.html">API Live : Insertion d'annonces côté serveur <span translate="No">(SSAI)</span></a>document.</p>
  
  <aside class="bcls-aside bcls-aside--information">
    
    <ul>
      <li>Avant de pouvoir utiliser <span translate="No">SSAI</span>, il doit être activé pour votre compte. Contactez votre gestionnaire de compte pour plus de détails.</li>
   </ul>
  
  </aside>
  </section>
  
  <section class="bcls-section">
  <h2 id="Cue_points">Points de repère</h2>
  
  <p>Les pauses publicitaires sont déclenchées par des points de repère, qui peuvent être spécifiés de deux façons :</p>
  
  <ul>
    <li>Envoyé à Brightcove par l'encodeur</li>
    <li>Points de repère immédiats créés via le <span translate="No">API en direct</span></li>
  </ul>
  
  <h3>Depuis l'encodeur</h3>
  
  <p>Le système de livraison en direct Brightcove peut interpréter les points de repère soumis par l'encodeur au format AMF :</p>
  
  <pre class="line-numbers">
  <code class="language-bash" translate="No">AMFDataList
  [0]:onCuePoint
  [1]:{Obj[]:
    time: 1.9889, //Difference from PTS of THIS packet to the first PTS of the 1st video frame in the adbreak
    name: "scte35",
    type: "event",
    ad_server_data: "YWJjZGVmZ2g=",	// optional introduced by Brightcove. It is a base64 encoded json map of parameters e.g. {‘key’:’value’}
    parameters: {Obj[]:
      type: "avail_in",
      duration: 12.0
    }
  }</code></pre>
  
  <h4>Notes :</h4>
  
  <ul>
    <li>Seul <code translate="No">avail_in</code> les points de repère de type sont actuellement pris en charge dans l'entrée RTMP.</li>
    <li>Les points de repère SCTE-35 sont pris en charge dans les entrées RTP et SRT.</li>
  </ul>
  
  <aside class="bcls-aside bcls-aside--information">Voir le <a href="#Appendix">annexe ci-dessous</a> pour une capture d'écran d'un exemple de configuration de point de repère pour l'encodeur Elemental.</aside>
  </section>
  
  <section class="bcls-section">
  <h2 id="Manual_cue_point_insertion">Insertion manuelle du point repère</h2>
  
  <p>Vous pouvez créer des points de repère immédiats à l'aide de l'API <span translate="No">Live en</span> envoyant une <code translate="No">POST</code> demande :</p>
  
  <table class="bcls-table">
    <tbody class="bcls-table__body">
      <tr>
        <th>Méthode</th>
        <td style="width:80em;"><code class="language-http" translate="No">POST</code></td>
      </tr>
      <tr>
        <th>URL</th>
        <td><code class="language-http" translate="No">https://api.bcovlive.io/v1/jobs/<span class="bcls-input">Job_ID</span>/cuepoint</code></td>
      </tr>
      <tr>
        <th>En-tête</th>
        <td><code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">your API KEY</span></code></td>
      </tr>
    </tbody>
  </table>
  
  <p>Inclure un corps de requête spécifiant les éléments suivants :</p>
  
  <table class="bcls-table">
    <thead class="bcls-table__head">
      <tr>
        <th>Champ</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td><code translate="No">duration</code></td>
        <td>Entier</td>
        <td>Durée de la pause en secondes.<br />
        <br />
        La durée du point de repère inséré doit être <strong>au moins deux fois la longueur des segments</strong> de la tâche. Voir l' <a href="#Duration_example">exemple de durée</a>.</td>
      </tr>
      <tr>
        <td><code translate="No">timecode</code></td>
        <td>Format SMPTE</td>
        <td><strong>FACULTATIF :</strong> Un code temporel au format SMPTE, <strong>HH:MM:SS:FF</strong> (FF = images), pour spécifier quand un ensemble de variables (paires clé/valeur) doit être transmis à ADServer.<br />
        <br />
        S'il est omis, le point de repère sera inséré immédiatement.<br />
        <br />
        Si vous utilisez la propriété timecode, l'encodeur doit envoyer le code temporel SMPTE-formatted (<code translate="No">HH:MM:SS:FF</code>) stocké dans la <code translate="No">tc</code> propriété via <code translate="No">OnFI</code>. Les codes temporels sont dès le début de la diffusion en direct.</td>
      </tr>
      <tr>
        <td><code translate="No">ad_server_data</code></td>
        <td>Objet</td>
        <td><strong>FACULTATIF :</strong> Les paires clé/valeur que vous passez dépendront du serveur publicitaire que vous utilisez. Pour plus de détails, consultez la documentation de votre serveur publicitaire et la section <a href="/live-api/ssai/live-api-server-side-ad-insertion-ssai.html#Targeting_ads_using_ad_macros">Ciblage des annonces à l'aide de macros</a> publicitaires.</td>
      </tr>
    </tbody>
  </table>
  
  <h4 id="Duration_example">Exemple de durée</h4>
  
  <p>La durée du point de repère inséré doit être <strong>au moins deux fois la longueur des segments</strong> de la tâche.</p>
  
  <p>Par exemple, l'insertion d'un point de repère de <strong>10 secondes</strong> dans une tâche avec <code translate="No">"segment_seconds"=4</code>, fonctionnera correctement. Toutefois, l'insertion du même point de repère dans une tâche avec <code translate="No">"segment_seconds"=6</code> entraînera l'erreur suivante :</p>
  
  <pre>
  <code class="language-json" translate="No">"error": "The parameter duration should be greater than
    or equal to (2 * target duration) of the job"
  </code></pre>
  &nbsp;
  
  <h3>Corps de demande d'échantillon</h3>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "duration": 30,
    "timecode": "15:50:49:16",
    "ad_server_data" : {
    "adbreakid": 12312
    "breaktheme": "fitness"
    }
  }</code></pre>
  
  <h4>Notes</h4>
  
  <ol>
    <li>Les codeurs logiciels tels que Wirecast et OBS ne prennent pas en charge le code temporel d'envoi via <code translate="No">OnFI</code> des paquets dans le flux RTMP</li>
    <li>Les codeurs matériels élémentaires prennent en charge le code temporel d'envoi via <code translate="No">OnFI</code> des paquets dans le flux RTMP</li>
  </ol>
  
  <h3>Exemple de réponse</h3>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "id": "Job_ID",
    "cue_point": {
      "id": "adBreak-2f58393ada1442d98eca0817fa565ba4",
      "duration": 30,
      "accuracy": "segment", [Can be <code translate="No">segment</code> or <code translate="No">frame </code> ]
      "inserted_at": "2017-07-21T09:30:46.307Z" [ Time when the cue point was inserted in the stream]
    },
  }</code></pre>
  </section>
  
  <section class="bcls-section">
  <h2 id="Beacons">Balises</h2>
  
  <p>Les balises sont des points de données lors de la lecture envoyés à des analytiques tiers pour déterminer si et combien d'annonces ont été diffusées. Dans cette section, nous examinerons les types de balises pouvant être définis à l'aide de l'API <span translate="No">Live</span>, ainsi que les variables pouvant être utilisées pour fournir les données. La section suivante détaille les requêtes API utilisées pour créer et gérer des jeux de balises.</p>
  
  <h3>Types de balise</h3>
  
  <table class="bcls-table">
    <caption class="bcls-caption--table">Types de balise</caption>
    <thead class="bcls-table__head">
      <tr>
        <th style="width:20%;">Type de balise</th>
        <th style="width:60%;word-wrap:break-word">Description</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td style="width:20%"><code translate="No">Load </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Lancé une fois par session et déclenché uniquement lorsque le manifeste de niveau supérieur est demandé</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">Play </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Le contenu a été demandé et le premier segment renvoyé</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">Heartbeat </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Durée cible (secondes de segment)</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">AdStart </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Publicités individuelles démarrées</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">AdFirstQuartile </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Premier quartile d'annonce (25%)</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">AdMidpoint </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Deuxième quartile publicitaire (50%)</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">AdThirdQuartile </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Troisième quartile publicitaire (75%)</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">AdComplete </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">Publicités individuelles complétées</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">AdBreakStart </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">La pause publicitaire a commencé</td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">AdBreakComplete </code></td>
        <td style="text-align:left;width:60%;word-wrap:break-word">le saut d'annonce a pris fin</td>
      </tr>
    </tbody>
  </table>
  
  <h3>Variables balises et annonces</h3>
  
  <p>Le tableau ci-dessous présente les variables que vous pouvez utiliser pour fournir des données pour les URL des balises. Pour inclure une variable, entourez de doubles accolades, comme ceci : <code translate="No"><span class="bcls-highlight">{{</span>job.job_id<span class="bcls-highlight">}}</span> </code>. Consultez la section suivante sur la gestion des jeux de balises pour obtenir des exemples complets.</p>
  
  <table class="bcls-table">
    <caption class="bcls-caption--table">Variables de configuration des annonces</caption>
    <thead class="bcls-table__head">
      <tr>
        <th style="width:20%;">Variable</th>
        <th style="width:60%;">
        <div style="word-wrap:break-word;">Description</div>
        </th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td style="width:20%"><code translate="No">session.session_id </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">identifiant de session unique</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">job.job_id </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">ID d'emploi unique</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">videocloud.video_id</code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Disponible uniquement pour les emplois créés avec une vidéo VideoCloud.</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">application_ad_configuration.description </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">valeur de l'application lors de la création de la session</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">random.int32 </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">entier signé aléatoire 32 bits</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">random.int64 </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">entier signé aléatoire 64 bits</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">random.uint32 </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">entier non signé 32 bits aléatoire</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">random.uint64 </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">entier non signé 64 bits aléatoire</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">random.uuid </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">uuid aléatoire</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">server.timestamputc </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">temps d'époque en millisecondes lorsque l'appel de l'ads-api a été fait</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">client.useragent </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">valeur d'en-tête http user-agent lors de la création de la session</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">client.ipaddress </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">http x-forwarded-for valeur d'en-tête lors de la création de la session, le cas échéant, sinon l'adresse distante</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">client.referrer </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">valeur d'en-tête de référent http lors de la création de session (note : c'est l'orthographe correcte)</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">client.referer </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">valeur d'en-tête de référent http lors de la création de session (orthographe http)</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">client.ipuaid </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">valeur de hachage de client.ipaddress et client.useragent</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">live.adbreak </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">(actuellement inutilisé)</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">live.adbreakdurationms</code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Durée du saut d'annonce en millisecondes</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">live.adbreakduration </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Durée du saut d'annonce en secondes à virgule flottante double précision</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">live.adbreakdurationint </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Durée du saut d'annonce en secondes entières</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">live.adbreak.timestamputc.wallclock </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">temps d'époque en millisecondes lorsque l'appel au serveur de publicités a été effectué</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">live.adbreak.timestamputc.origin </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">temps d'époque en millisecondes à partir du chunklist d'origine. Cette valeur indique l'heure à laquelle le morceau de repère a été créé dans la liste de chunklist d'origine.</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">live.adbreak.timestamputc.session </code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">temps d'époque en millisecondes du chunklist ssai. Cette valeur indique l'heure du morceau de cue out dans le chunklist ssai. Étant donné que le contenu adbreak et l'écart adbreak ne sont généralement PAS les mêmes, après le premier adbreak, <code translate="No">live.adbreak.timestamputc.origin </code> il est différent de <code translate="No">live.adbreak.timestamputc.session </code>. Cette valeur tient compte des ajustements de temps qui ont été effectués dans le <span translate="No">SSAI</span> liste de morceaux.</div>
        </td>
      </tr>
    </tbody>
  </table>
  
  <h3>Variables d'annonces SCTE-35</h3>
  
  <p>La <a href="https://www.scte.org/">Society of Cable Telecommunications Engineers (SCTE)</a> définit une norme pour l'insertion dynamique des annonces pour les flux en direct. Le tableau suivant résume les variables de configuration des annonces SCTE-35.</p>
  
  <aside class="bcls-aside bcls-aside--information">
  <p>Les paramètres d'annonce SCTE-35 sont actuellement pris en charge avec les sources d'entrée RTP (Real-time Transport Protocol) avec ou sans Forward Error Correction (FEC) et Secure Reliable Transport (SRT) basées sur Transport Stream (TS). Notez que FEC est fortement recommandé pour RTP.</p>
  Ces paramètres publicitaires ne sont pas disponibles avec les flux d'entrée utilisant le protocole RTMP (Real-Time Messaging Protocol).</aside>
  
  <table class="bcls-table">
    <caption class="bcls-caption--table">Variables de configuration des annonces SCTE-35</caption>
    <thead class="bcls-table__head">
      <tr>
        <th style="width:20%;">Variable</th>
        <th style="width:60%;">
        <div style="word-wrap:break-word;">Description</div>
        </th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td style="width:20%"><code translate="No">scte35_eventID</code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">un identifiant d'événement unique transmis avec un message SCTE35.</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">scte35_programID</code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Un identifiant de programme unique transmis avec un message SCTE35.</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">scte35_availNum</code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Identifiant pour un temps d'épissure spécifique disponible pour les annonces, envoyé via un message SCTE35.</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">scte35_breakDuration</code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Durée de pause de la pause publicitaire, en termes de ticks de l'horloge de 90 kHz du programme, passée avec un message SCTE35.</div>
        </td>
      </tr>
      <tr>
        <td style="width:20%"><code translate="No">scte35_spliceTime</code></td>
        <td style="text-align:left;width:60%;">
        <div style="word-wrap:break-word;">Temps d'épissage pour une pause publicitaire, en termes de ticks de l'horloge de 90 kHz du programme, passé avec un message SCTE35.</div>
        </td>
      </tr>
    </tbody>
  </table>
  </section>
  
  <section class="bcls-section">
  <h2 id="Managing_beacon_sets">Gestion des jeux de balises</h2>
  
  <p>Cette section fournit des détails sur les demandes d'API pour gérer les jeux de balises. Reportez-vous à la section précédente pour connaître les types de balise et les variables.</p>
  
  <p>Pour ajouter un jeu de balise à une tâche Live, créez d'abord le jeu de balise, puis incluez l'identifiant lors de la création de la tâche, comme ceci :</p>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 30,
  "ad_insertion": true,
  "beacon_set": "<span class="bcls-input">beacon_set_id</span>", ...</code></pre>
  
  <h3>Créer un jeu de balise</h3>
  
  <p>Pour créer un jeu de balise, envoyez une <code translate="No">POST</code> requête :</p>
  
  <table class="bcls-table">
    <tbody class="bcls-table__body">
      <tr>
        <th>Méthode</th>
        <td style="width:80em;"><code class="language-http" translate="No">POST</code></td>
      </tr>
      <tr>
        <th>URL</th>
        <td><code class="language-http" translate="No">https://api.bcovlive.io/v1/ssai/beaconsets</code></td>
      </tr>
      <tr>
        <th>En-tête</th>
        <td><code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">your API KEY</span></code></td>
      </tr>
    </tbody>
  </table>
  
  <h4>Corps de demande d'échantillon</h4>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "account_id": "<span class="bcls-input">User's Account ID [Optional]</span>",
    "beacon_urls": [
      {
        "beacon_url": "https://myserver.com/beaconRX/{{job.job_id}}/load?position=load&amp;sid={{session.session_id}}&amp;jid={{job.job_id}}&amp;app={{application_ad_configuration.description}}&amp;rnd32={{random.int32}}&amp;rnd64={{random.int64}}&amp;bid={{random.uuid}}&amp;t={{server.timestamputc}}&amp;ua={{client.useragent}}&amp;ip={{client.ipaddress}}&amp;ref={{client.referrer}}&amp;ref={{client.referer}}&amp;ab={{live.adbreak}}&amp;abd={{live.adbreakduration}}&amp;abdi={{live.adbreakdurationint}}",
        "beacon_type": "Load"
      },
      {
        "beacon_url": "https://myserver.com/beaconRX/{{job.job_id}}/play?position=play&amp;sid={{session.session_id}}&amp;jid={{job.job_id}}&amp;app={{application_ad_configuration.description}}&amp;rnd32={{random.int32}}&amp;rnd64={{random.int64}}&amp;bid={{random.uuid}}&amp;t={{server.timestamputc}}&amp;ua={{client.useragent}}&amp;ip={{client.ipaddress}}&amp;ref={{client.referrer}}&amp;ref={{client.referer}}&amp;ab={{live.adbreak}}&amp;abd={{live.adbreakduration}}&amp;abdi={{live.adbreakdurationint}}",
        "beacon_type": "Play"
      }
    ]
  }</code></pre>
  
  <aside class="bcls-aside bcls-aside--information">Les <code translate="No">account_id </code> le champ est l'ID de compte réel. Lorsqu'il est omis, l'ID de compte de l'utilisateur demandeur est utilisé.</aside>
  
  <h4>Exemple de réponse</h4>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "beacon_set": {
      "beacon_urls": [{
      "beacon_url": "https://myserver.com/beaconRX/{{job.job_id}}/load?position=load&amp;sid={{session.session_id}}&amp;jid={{job.job_id}}&amp;app={{application_ad_configuration.description}}&amp;rnd32={{random.int32}}&amp;rnd64={{random.int64}}&amp;bid={{random.uuid}}&amp;t={{server.timestamputc}}&amp;ua={{client.useragent}}&amp;ip={{client.ipaddress}}&amp;ref={{client.referrer}}&amp;ref={{client.referer}}&amp;ab={{live.adbreak}}&amp;abd={{live.adbreakduration}}&amp;abdi={{live.adbreakdurationint}}",
      "beacon_type": "Load"
    },
    {
      "beacon_url": "https://myserver.com/beaconRX/{{job.job_id}}/play?position=play&amp;sid={{session.session_id}}&amp;jid={{job.job_id}}&amp;app={{application_ad_configuration.description}}&amp;rnd32={{random.int32}}&amp;rnd64={{random.int64}}&amp;bid={{random.uuid}}&amp;t={{server.timestamputc}}&amp;ua={{client.useragent}}&amp;ip={{client.ipaddress}}&amp;ref={{client.referrer}}&amp;ref={{client.referer}}&amp;ab={{live.adbreak}}&amp;abd={{live.adbreakduration}}&amp;abdi={{live.adbreakdurationint}}",
      "beacon_type": "Play"
    }],
    "beacon_set_id": "Inserted Beacon Set ID",
    "account_id": "USER's ACCOUNT ID"
    }
    "inserted": true
  }</code></pre>
  
  <h3>Mettre à jour un jeu de balise</h3>
  
  <p>La mise à jour d'un jeu de balises est similaire à la création d'un jeu. Soumettre une <code translate="No">PUT</code> demande :</p>
  
  <table class="bcls-table">
    <tbody class="bcls-table__body">
      <tr>
        <th>Méthode</th>
        <td style="width:80em;"><code class="language-http" translate="No">PUT</code></td>
      </tr>
      <tr>
        <th>URL</th>
        <td><code class="language-http" translate="No">https://api.bcovlive.io/v1/ssai/beaconsets/beaconset/<span class="bcls-input">beacon_set_id</span> </code></td>
      </tr>
      <tr>
        <th>En-tête</th>
        <td><code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">your API KEY</span></code></td>
      </tr>
    </tbody>
  </table>
  
  <h4>Corps de demande d'échantillon</h4>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "account_id": "<span class="bcls-input">User's Account ID [Optional]</span>",
    "beacon_urls": [
      {
      "beacon_url": "https://myserver.com/beaconRX/load",
      "beacon_type": "Load"
      },
      {
      "beacon_url": "https://myserver.com/beaconRX/play",
      "beacon_type": "Play"
      }
    ]
  }</code></pre>
  
  <aside class="bcls-aside bcls-aside--information">Les <code translate="No">account_id </code> le champ est l'ID de compte réel. Lorsqu'il est omis, l'ID de compte de l'utilisateur demandeur est utilisé.</aside>
  
  <h4>Exemple de réponse</h4>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "beacon_set": {
      "account_id": "User's Account ID",
      "beacon_set_id": "Beacon set ID",
      "beacon_urls": [{
        "beacon_url": "https://myserver.com/beaconRX/load",
        "beacon_type": "Load"
        },
        {
        "beacon_url": "https://myserver.com/beaconRX/play",
        "beacon_type": "Play"
      }],
      "updated_beacon_set": {
        "beacon_set_id": "Beacon set ID",
        "beacon_urls": [{
          "beacon_url": "https://myserver.com/beaconRX/load",
          "beacon_type": "Load"
        },
        {
          "beacon_url": "https://myserver.com/beaconRX/play",
          "beacon_type": "Play"
        }],
        "account_id": "User's Account ID"
      }
    }
  }</code></pre>
  
  <h3>Obtenir des jeux de balise</h3>
  
  <p>Pour récupérer les jeux de balises d'un compte, envoyez une <code translate="No">GET</code> demande :</p>
  
  <table class="bcls-table">
    <tbody class="bcls-table__body">
      <tr>
        <th>Méthode</th>
        <td style="width:80em;"><code class="language-http" translate="No">GET</code></td>
      </tr>
      <tr>
        <th>URL</th>
        <td><code class="language-http" translate="No">https://api.bcovlive.io/v1/ssai/beaconsets/account/<span class="bcls-input">Account ID</span></code></td>
      </tr>
      <tr>
        <th>En-tête</th>
        <td><code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">your API KEY</span></code></td>
      </tr>
    </tbody>
  </table>
  
  <aside class="bcls-aside bcls-aside--information">Notez que l'ID de compte ici est l'ID de compte Live.</aside>
  
  <h4>Exemple de réponse</h4>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">[{
      "account_id": "User's Account ID",
      "beacon_set_id": "Beacon set ID1",
      "beacon_urls": [{
      "beacon_url": "https://myserver.com/beaconRX/load",
      "beacon_type": "Load"
    }]
    },
    {
      "account_id": "User's Account ID",
      "beacon_set_id": "Beacon set ID2",
      "beacon_urls": [{
      "beacon_url": "https://myserver.com/beaconRX2/load",
      "beacon_type": "Load"
      },
      {
      "beacon_url": "https://myserver.com/beaconRX2/play",
      "beacon_type": "Play"
      }]
  }]</code></pre>
  
  <h3>Obtenir des jeux de balise pour demander l'utilisateur</h3>
  
  <p>Vous pouvez également obtenir les jeux de balises pour le compte de l'utilisateur demandeur sans inclure l'ID du compte dans l'URL de la requête :</p>
  
  <table class="bcls-table">
    <tbody class="bcls-table__body">
      <tr>
        <th>Méthode</th>
        <td style="width:80em;"><code class="language-http" translate="No">GET</code></td>
      </tr>
      <tr>
        <th>URL</th>
        <td><code class="language-http" translate="No">https://api.bcovlive.io/v1/ssai/beaconsets</code></td>
      </tr>
      <tr>
        <th>En-tête</th>
        <td><code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">your API KEY</span></code></td>
      </tr>
    </tbody>
  </table>
  
  <h4>Exemple de réponse</h4>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">[{
      "account_id": "User's Account ID",
      "beacon_set_id": "Beacon set ID1",
      "beacon_urls": [{
      "beacon_url": "https://myserver.com/beaconRX/load",
      "beacon_type": "Load"
    }]
    },
    {
      "account_id": "User's Account ID",
      "beacon_set_id": "Beacon set ID2",
      "beacon_urls": [{
      "beacon_url": "https://myserver.com/beaconRX2/load",
      "beacon_type": "Load"
      },
      {
      "beacon_url": "https://myserver.com/beaconRX2/play",
      "beacon_type": "Play"
      }]
  }]</code></pre>
  
  <h3>Obtenir une balise définie par id</h3>
  
  <p>Pour récupérer une balise unique définie par son identifiant, envoyez une <code translate="No">GET</code> requête :</p>
  
  <table class="bcls-table">
    <tbody class="bcls-table__body">
      <tr>
        <th>Méthode</th>
        <td style="width:80em;"><code class="language-http" translate="No">GET</code></td>
      </tr>
      <tr>
        <th>URL</th>
        <td><code class="language-http" translate="No">https://api.bcovlive.io/v1/ssai/beaconsets/beaconset/<span class="bcls-input">beacon_set_id</span></code></td>
      </tr>
      <tr>
        <th>En-tête</th>
        <td><code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">your API KEY</span></code></td>
      </tr>
    </tbody>
  </table>
  
  <h4>Exemple de réponse</h4>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
      "account_id": "User account ID",
      "beacon_set_id": "Beacon set ID",
      "beacon_urls": [{
        "beacon_type": "Load",
        "beacon_url": "https://myserver.com/beaconRX2/load"
    },
    {
      "beacon_type": "Play",
      "beacon_url": "https://myserver.com/beaconRX2/play"
    }]
  }</code></pre>
  
  <h3>Supprimer un jeu de balise</h3>
  
  <p>Enfin, pour supprimer un jeu de balise, envoyez une <code translate="No">DELETE</code> requête :</p>
  
  <table class="bcls-table">
    <tbody class="bcls-table__body">
      <tr>
        <th>Méthode</th>
        <td style="width:80em;"><code class="language-http" translate="No">DELETE</code></td>
      </tr>
      <tr>
        <th>URL</th>
        <td><code class="language-http" translate="No">https://api.bcovlive.io/v1/ssai/beaconsets/beaconset/<span class="bcls-input">beacon_set_id</span></code></td>
      </tr>
      <tr>
        <th>En-tête</th>
        <td><code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">your API KEY</span></code></td>
      </tr>
    </tbody>
  </table>
  
  <h4>Exemple de réponse</h4>
  
  <p>La réponse ressemblera à ceci :</p>
  
  <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "beacon_set_id": "Beacon set ID",
    "deleted": true
  }</code></pre>
  </section>
  
  <section class="bcls-section">
  <h2 id="Appendix">Annexe</h2>
  
  <p>Voici une capture d'écran pour montrer un exemple de configuration de point de repère pour l'encodeur Elemental.</p>
  
  <figure class="bcls-figure"><img class="bcls-image" alt="Elemental Cue Point Setup" src="/assets/images/live-api/18835/elemental-screenshot.png" />
  <figcaption class="bcls-caption--image">Configuration du point de repère élémentaire</figcaption>
  </figure>
  </section>
  {% endraw %}
  </article>
  